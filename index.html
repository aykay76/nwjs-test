<!DOCTYPE html>
<html>
<head>
  <title>Context Menu</title>
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
</head>
<body style="width: 100%; height: 100%;">

    <p id="persistent">Grab value from local storage</p>
    <div class="form-group">
    <input type="text" value="Enter value to place in local storage" id="thevalue" class="form-control" />
  </div>
  <div class="form-group">
      <input type="button" id="setit" class="btn btn-primary" value="Set It!" />
		<input type="button" id="clear" class="btn btn-primary" value="Clear" />
  </div>

		<script type="text/javascript">
			let p = document.querySelector("#persistent");
			
			if (window.localStorage)
			{
				p.textContent = localStorage.getItem('testitem');
			}
			else
			{
				document.querySelectorAll('input').forEach((i)=> {i.enabled = false })
			}
			document.querySelectorAll('input#clear')[0].addEventListener('click', (el,me)=>{
				window.localStorage.clear();
				p.textContent = '';
			});
			document.querySelector('input#setit').addEventListener('click', ()=>{
				let val = document.querySelector('#thevalue').value
				window.localStorage.setItem('testitem', val);
				p.textContent = val;
			});
		</script>
<p>'Right click' to show context menu.</p>

<script>
  var nodeCrypto = require('crypto')

  // nodeCrypto.generateKeyPair('rsa', {
  //   modulusLength: 4096,
  //   publicKeyEncoding: {
  //     type: 'spki',
  //     format: 'pem'
  //   },
  //   privateKeyEncoding: {
  //     type: 'pkcs8',
  //     format: 'pem',
  //     cipher: 'aes-256-cbc',
  //     passphrase: 'top secret'
  //   }
  // }, (err, publicKey, privateKey) => {
    // Handle errors and use the generated key pair.
    // alert(publicKey)
    // alert(privateKey)
  // });

// Create an empty context menu
var menu = new nw.Menu();

// Add some items with label
menu.append(new nw.MenuItem({
  label: 'Item A',
  click: function(){
    alert('You have clicked at "Item A"');
  }
}));
menu.append(new nw.MenuItem({ label: 'Item B' }));
menu.append(new nw.MenuItem({ type: 'separator' }));
menu.append(new nw.MenuItem({ label: 'Item C' }));

// Hooks the "contextmenu" event
document.body.addEventListener('contextmenu', function(ev) {
  // Prevent showing default context menu
  ev.preventDefault();
  // Popup the native context menu at place you click
  menu.popup(ev.x, ev.y);

  return false;
}, false);

</script>  
</body>
</html>
